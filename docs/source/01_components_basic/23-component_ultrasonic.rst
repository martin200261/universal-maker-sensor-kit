.. note::

    こんにちは、SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Communityへようこそ！Facebook上で、仲間と一緒にRaspberry Pi、Arduino、ESP32をさらに深く探求しましょう。

    **なぜ参加するのか？**

    - **専門的なサポート**：購入後の問題や技術的な課題をコミュニティやチームの助けを借りて解決。
    - **学びと共有**：スキルを向上させるためのヒントやチュートリアルを交換。
    - **限定プレビュー**：新製品発表や予告編に早期アクセス。
    - **特別割引**：最新製品の特別割引を楽しむ。
    - **フェスティブプロモーションとプレゼント**：プレゼントやホリデープロモーションに参加。

    👉 私たちと一緒に探索と創造を始める準備はできましたか？[|link_sf_facebook|]をクリックして、今すぐ参加しましょう！
.. _cpn_ultrasonic:

超音波センサーモジュール (HC-SR04)
=====================================

.. image:: img/23_ultrasonic.png
    :width: 350
    :align: center

.. raw:: html

   <br/>

超音波モジュール(HC-SR04)は、超音波を使用して2cmから400cmまでの距離を測定できるセンサーです。ロボティクスや自動化プロジェクトで物体の検出や距離の測定によく使用されます。このモジュールは、超音波送信機と受信機で構成されており、送信と受信を連携して行います。


.. _cpn_ultrasonic_principle:

原理
---------------------------
このモジュールには、超音波送信機、受信機、および制御回路が含まれています。基本的な原理は次の通りです：

#. IOフリップフロップを使用して、少なくとも10usの高レベル信号を処理します。

#. モジュールは自動的に8つの40kHzパルスを送信し、パルス信号が戻るかどうかを検出します。

#. 信号が戻った場合、高レベル信号の持続時間は超音波の送信から戻りまでの時間です。ここで、テスト距離 = (高レベル時間 x 音速 (340 m/s) / 2)。

以下にタイミング図を示します。

.. image:: img/23_ultrasonic_principle.png

トリガー入力に短い10usパルスを供給するだけで測距を開始でき、モジュールは40kHzの超音波を8周期発信し、エコーを検出します。トリガー信号の送信からエコー信号の受信までの時間間隔を使用して距離を計算できます。

.. note::
    トリガー信号とエコー信号の衝突を防ぐため、60ms以上の測定サイクルを使用することを推奨します。

公式: 
    - us / 58 = センチメートル
    - us / 148 = インチ
    - 距離 = 高レベル時間\* 音速  (340m/s) / 2; 


例
---------------------------
* :ref:`uno_lesson23_ultrasonic` (Arduino UNO)
* :ref:`esp32_lesson23_ultrasonic` (ESP32)
* :ref:`pico_lesson23_ultrasonic` (Raspberry Pi Pico)
* :ref:`pi_lesson23_ultrasonic` (Raspberry Pi)

* :ref:`uno_lesson37_trashcan` (Arduino UNO)

* :ref:`esp32_trashcan` (ESP32)