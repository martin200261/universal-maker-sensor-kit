.. note::

    こんにちは、SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Communityへようこそ！Facebook上で、仲間と一緒にRaspberry Pi、Arduino、ESP32をさらに深く探求しましょう。

    **なぜ参加するのか？**

    - **専門的なサポート**：購入後の問題や技術的な課題をコミュニティやチームの助けを借りて解決。
    - **学びと共有**：スキルを向上させるためのヒントやチュートリアルを交換。
    - **限定プレビュー**：新製品発表や予告編に早期アクセス。
    - **特別割引**：最新製品の特別割引を楽しむ。
    - **フェスティブプロモーションとプレゼント**：プレゼントやホリデープロモーションに参加。

    👉 私たちと一緒に探索と創造を始める準備はできましたか？[|link_sf_facebook|]をクリックして、今すぐ参加しましょう！

.. _cpn_rotary_encoder:

ロータリーエンコーダーモジュール
=====================================

.. image:: img/17_rotary_encoder.png
    :width: 35%
    :align: center

.. raw:: html

   <br/>

ロータリーエンコーダーは、ノブの回転を出力信号に変換し、ノブが回転した方向を示す位置センサーです。

ロータリーエンコーダーはポテンショメータのデジタル版であり、より多用途です。ポテンショメータは回転が制限されていますが、ロータリーエンコーダーは連続して回転できます。ポテンショメータはノブの正確な位置を示しますが、ロータリーエンコーダーは位置の変化を示します。

ピン配置
---------------------------
* **VCC**: メインコントローラからの正電源入力。
* **GND**: グランド接続。
* **SW**: デジタル出力。
* **CLK**: CLK出力に似ていますが、CLKに対して90°の位相差で遅れます。この出力は回転方向を決定するために使用されます。
* **DT**: 回転量を決定するために使用される主要な出力パルスです。ノブがどちらの方向にでも一つのデテント（クリック）で回転するたびに、‘CLK’出力はHIGHからLOWに変化する1サイクルを経ます。

原理
---------------------------

インクリメンタルエンコーダーは、AおよびBチャネルと呼ばれる90度の位相差を持つ2つの正方波を生成します。

下図のように、チャネルAが高レベルから低レベルに遷移する時、チャネルBが高レベルであれば、ロータリーエンコーダーは時計回り（CW）に回転していることを示します。一方、その時点でチャネルBが低レベルであれば、反時計回り（CCW）に回転していることを意味します。したがって、チャネルAが低レベルの時にチャネルBの値を読み取ることで、ロータリーエンコーダーの回転方向を判断できます。

.. image:: img/17_rotary_encoder_wave.png
    :width: 60%
    :align: center

回路図
---------------------------

.. image:: img/17_rotary_encoder_schematic.png
    :width: 100%
    :align: center

.. raw:: html

   <br/>

例
---------------------------

* :ref:`uno_lesson17_rotary_encoder` (Arduino UNO)
* :ref:`esp32_lesson17_rotary_encoder` (ESP32)
* :ref:`pico_lesson17_rotary_encoder` (Raspberry Pi Pico)
* :ref:`pi_lesson17_rotary_encoder` (Raspberry Pi)